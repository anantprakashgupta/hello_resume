<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<!-- Favicons -->
	<link rel="stylesheet" href="/assets/css/styles.css">
	<link rel="stylesheet" href="/assets/css/hand.css">
	<link rel="stylesheet" href="/assets/css/simple-lightbox.min.css" />
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


	<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png" />
	<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png" />
	<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png" />
	<link rel="stylesheet" href="style.css">
	<script src="/assets/js/min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />


	<title>Resume Landing Page</title>
</head>

<body>
	<nav >
	<a href="/user" class="logo">
		<h1>
			<span class="jab" style="font-size: 20px;">HELLO </span><span style="font-size: 20px;"
				class="tv">RESUME</span><span>
				<img src="/assets/images/hand2.png" style="font-size: 20px; width:20px;" class="hand-image"> </img>
			</span>
		</h1>
	</a>

		<!-- Dark/light theme switcher -->
		<div class="theme-switch">
			<input type="checkbox" class="checkbox" id="checkbox" />
			<label for="checkbox" class="label">
				<ion-icon name="partly-sunny-outline" class="sun"></ion-icon>
				<ion-icon name="moon-outline" class="moon"></ion-icon>
				<div class="switcher"></div>
			</label>
		</div>

		<ul>
			<li class="nav-item">
				<a href="/user" class="nav-link" id="nav-link">HOME</a>
			</li>
			<li class="nav-item">
				<a href="/about" class="nav-link" id="nav-link">About</a>
			</li>
			
			<li class="nav-item">
				<a href="#stars" class="nav-link" id="nav-link">Resume</a>
			</li>
			<li class="nav-item">
				<a href="/login" class="nav-link" id="nav-link">Login</a>
			</li>
			<li class="nav-item">
				<a href="/register" class="nav-link" id="nav-link">signIn</a>
			</li>
		

		</ul>

		<!-- Bars -->
		<div class="hamburger" id="hamburger">
			<span class="bar"></span>
			<span class="bar"></span>
			<span class="bar"></span>
		</div>
	</nav>
	
	<body>
	<div class="container">
		<div class="wrapper">
			<div class="title"><span>Login Here..</span></div>
			<form id="loginForm">
				<div id="errorMessage" class="error-message" style="color: red;"></div>
				<div class="row">
					<i class="fas fa-user"></i>
					
					<input type="text" id="userid" placeholder="Enter Your UserId" required>
				</div>
				<div class="row">
					<i class="fas fa-lock"></i>
					<input type="password" id="password" placeholder="Password" required>
				</div>
				<div class="pass"><a href="/verify_otp">Forgot password?</a></div>
				<div class="row_button">
					<i class="fas fa-sign-in-alt"></i>

					<button type="submit" >Login</button>
				</div>
				<div class="signup-link"> <a href="/register">Sign-up now</a></div>
			</form>
			<div id="errorMessage" class="error-message"></div>
		</div>
	</div>

	
	</body>
	
	</html>


	<section class="sub" id="sub">
		<h3>Subscribe to our website for updates</h3>
		<form action="#">
			<input type="email" name="email" id="email-sub" class="email-sub" required />
			<input type="submit" value="Subscribe" id="submit-btn" class="submit-btn" />
		</form>
	</section>

	<!-- Social icons -->
	<section class="social">
		<h3>Connect with us on Social Media</h3>
		<div class="socicons">
			<a href="#"> <ion-icon name="logo-twitter"></ion-icon> </a>
			<a href="#"> <ion-icon name="logo-instagram"></ion-icon> </a>
			<a href="#"> <ion-icon name="logo-facebook"></ion-icon> </a>
		</div>
	</section>
    
	<footer>&copy;2023. All Rights Reserverd
		<h5 style="text-align: center">Number of Connected Users: <span id="userCount"></span></h5>
	</footer>
	

	<!-- Scroll to top button -->
	<i class="scroll-up" id="scroll-up"><img src="assets/icons/icons8-upward-arrow.png" class="socicon up-arrow"
			alt="up-arrow" /></i>

	<!-- Web page script -->
	<script src="assets/js/app.js"></script>

	<!-- Ion icons CDN -->
	<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>

	<!-- Simple lightbox -->
	<script src="assets/js/simple-lightbox.min.js"></script>
	<script>
		var lightbox = new SimpleLightbox(".stars-gallery a");
	</script>
</body>

<script>
	$(document).ready(function () {
		$('#loginForm').submit(function (event) {
			event.preventDefault(); // Prevent form submission

			const userid = $('#userid').val();
			const password = $('#password').val();

			const data = {
				userid: userid,
				password: password
			};

			$.ajax({
				type: 'POST',
				url: '/login_api',
				headers: {
					'Content-Type': 'application/json'
				},
				data: JSON.stringify(data),
				success: function (response) {
					swal({
						title: "Success!",
						text: "Login successfully",
						icon: "success",
						timer: 3000, // 3 seconds
						button: false, // Hide the button
						closeOnClickOutside: false, // Prevent closing on click outside the alert
						closeOnEsc: false // Prevent closing on pressing Esc key
					});
					console.log("session data", response);
					localStorage.setItem("userid", userid);
					window.location.href = '/role_chek'; // Redirect to the desired page on successful login
				},
				error: function (xhr, status, error) {
					const errorMessage = $('#errorMessage');
					const responseObj = JSON.parse(xhr.responseText);
					errorMessage.text(responseObj.error); // Display the error message
				}
			});
		});
	});
</script>


<style>
	@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap');
*{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Poppins',sans-serif;
}

::selection{
  background: rgba(39, 105, 226, 0.3);
}
.container{
  max-width: 440px;
  padding: 0 20px;
  margin: 170px auto;
  margin-top: 50px;
}
.wrapper{
  width: 100%;
  background: #fff;
  border-radius: 5px;
  box-shadow: 0px 4px 10px 1px rgba(5, 4, 4, 0.1);
}
.wrapper .title{
  height: 90px;
  background: #133eca;
  border-radius: 5px 5px 0 0;
  color: #fff;
  font-size: 30px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
}
.wrapper form{
  padding: 30px 25px 25px 25px;
}
.wrapper form .row{
  height: 45px;
  margin-bottom: 15px;
  position: relative;
}
.wrapper form .row input{
  height: 100%;
  width: 100%;
  outline: none;
  padding-left: 60px;
  border-radius: 5px;
  border: 1px solid lightgrey;
  font-size: 16px;
  transition: all 0.3s ease;
}
form .row input:focus{
  border-color: #133eca;
  box-shadow: inset 0px 0px 2px 2px rgba(26,188,156,0.25);
}
form .row input::placeholder{
  color: #999;
}
.wrapper form .row i{
  position: absolute;
  width: 47px;
  height: 100%;
  color: #fff;
  font-size: 18px;
  background: #133eca;
  border: 1px solid #133eca;
  border-radius: 5px 0 0 5px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.wrapper form .pass{
  margin: -8px 0 20px 0;
}
.wrapper form .pass a{
  color: #133eca;
  font-size: 17px;
  text-decoration: none;
}
.wrapper form .pass a:hover{
  text-decoration: underline;
}
.wrapper button{
  color: #fff;
  font-size: 20px;
  font-weight: 500;
  width: 100px;
  height: 50px;
  background: #133eca;
  border: 1px solid black;
  cursor: pointer;
  border-radius: 10px;
  /* margin-left: -20px; */
}
.wrapper button:hover{
  background: #173630;
}
.wrapper form .signup-link{
  text-align: center;
  margin-top: 20px;
  font-size: 17px;
}
.wrapper form .signup-link a{
  color: #16a085;
  text-decoration: none;
}
form .signup-link a:hover{
  text-decoration: underline;
}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
	$(document).ready(function () {
		updateUserCount();

		function updateUserCount() {
			$.ajax({
				url: '/user_count',
				success: function (data) {
					$('#userCount').text(data.userCount);
				}
			});
		}

		// Connect to the WebSocket server
		const socket = io();

		// Update user count when received from the server
		socket.on('userCount', function (userCount) {
			$('#userCount').text(userCount);
		});
	});
</script>


</html>